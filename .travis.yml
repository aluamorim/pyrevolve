sudo: false

language: python

matrix:
  include:
    - os: linux
      python: "3.6"
      env: PYTHONPATH=$PWD:$PWD/pyzfp
    - os: linux
      python: "2.7"
      env: PYTHONPATH=$PWD:$PWD/pyzfp

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test     # For gcc 4.9 and 5
    packages:
      - gcc-4.9
      - g++-4.9
      - gcc-5
      - g++-5

script:
  - git clone https://github.com/navjotk/pyzfp.git && cd pyzfp && make
  - flake8 --exclude versioneer.py .
  - python setup.py build_ext --inplace
  - python examples/use_classic.py
  - python examples/use_modernised.py
  - py.test -vs tests/